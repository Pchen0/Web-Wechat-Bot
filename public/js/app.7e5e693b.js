(function(){"use strict";var e={5318:function(e,t,a){var o=a(9242),l=a(3396);const n={id:"app"};function r(e,t,a,o,r,u){const s=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(s)])}var u={name:"app"},s=a(89);const i=(0,s.Z)(u,[["render",r]]);var c=i,d=a(2483),m=a(7139);const p=e=>((0,l.dD)("data-v-404c6e77"),e=e(),(0,l.Cn)(),e),f={class:"common-layout"},w=p((()=>(0,l._)("span",null,"登录微信",-1))),g=p((()=>(0,l._)("span",null,"发送历史",-1))),h=p((()=>(0,l._)("span",null,"设置",-1))),v=p((()=>(0,l._)("span",null,"退出登录",-1))),y={key:0,class:"centered-content"},W=p((()=>(0,l._)("h1",null,"尚未登录微信o(╥﹏╥)o",-1))),_={key:1,class:"centered-content"},b=p((()=>(0,l._)("br",null,null,-1))),x=p((()=>(0,l._)("br",null,null,-1)));function k(e,t,a,o,n,r){const u=(0,l.up)("CameraFilled"),s=(0,l.up)("el-icon"),i=(0,l.up)("el-menu-item"),c=(0,l.up)("Promotion"),d=(0,l.up)("Tools"),p=(0,l.up)("CircleCloseFilled"),k=(0,l.up)("el-menu"),z=(0,l.up)("el-row"),V=(0,l.up)("el-aside"),C=(0,l.up)("el-button"),F=(0,l.up)("el-avatar"),U=(0,l.up)("el-main"),S=(0,l.up)("el-container");return(0,l.wg)(),(0,l.iD)("div",f,[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,{width:"80px"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{class:"tac",style:{height:"100vh"}},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"el-menu",style:{"background-color":"skyblue"},collapse:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{index:"2",onClick:t[0]||(t[0]=e=>r.handleRouter("/wxlogin"))},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1}),w])),_:1}),(0,l.Wm)(i,{index:"3",onClick:t[1]||(t[1]=e=>r.handleRouter("/history"))},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1}),g])),_:1}),(0,l.Wm)(i,{index:"4",onClick:t[2]||(t[2]=e=>r.handleRouter("/config"))},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1}),h])),_:1}),(0,l.Wm)(i,{index:"5",onClick:r.logout},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1}),v])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(U,{class:"main-container"},{default:(0,l.w5)((()=>[o.isLogin?((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("h1",null,(0,m.zw)(o.wxname)+"，欢迎你！(*^▽^*)",1),(0,l.Wm)(F,{shape:"square",size:100,fit:e.fit,src:"/getavatar"},null,8,["fit"]),b,x,(0,l.Wm)(C,{type:"primary",round:"",class:"loginbutton",onClick:t[5]||(t[5]=e=>r.handleRouter("/history"))},{default:(0,l.w5)((()=>[(0,l.Uk)("发送历史")])),_:1}),(0,l.Wm)(C,{type:"primary",round:"",class:"loginbutton",onClick:t[6]||(t[6]=e=>r.handleRouter("/config"))},{default:(0,l.w5)((()=>[(0,l.Uk)("系统设置")])),_:1})])):((0,l.wg)(),(0,l.iD)("div",y,[W,(0,l.Wm)(C,{type:"primary",round:"",class:"loginbutton",onClick:t[3]||(t[3]=e=>r.handleRouter("/wxlogin"))},{default:(0,l.w5)((()=>[(0,l.Uk)("点我登录")])),_:1}),(0,l.Wm)(C,{type:"primary",round:"",class:"loginbutton",onClick:t[4]||(t[4]=e=>r.handleRouter("/config"))},{default:(0,l.w5)((()=>[(0,l.Uk)("系统设置")])),_:1})]))])),_:1})])),_:1})])}a(560);var z=a(4870),V=a(7178),C=a(6e3),F=a(1076),U={setup(){const e=(0,z.iH)(!1),t=(0,z.iH)("");return(0,l.bv)((async function(){try{const a=await F.Z.get("/getstatus");if(200===a.data.status){e.value=!0;const a=await F.Z.get("/getwxname");t.value=a.data.wxname}else 401===a.data.status&&V.z8.error("登录已过期，请重新登录！")}catch(a){V.z8.error("获取登录状态失败！")}})),{isLogin:e,wxname:t}},methods:{logout(){C.T.confirm("是否退出登录？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{window.localStorage.removeItem("token"),V.z8.success("退出登录成功！"),this.$router.push("/login")})).catch((()=>{(0,V.z8)({type:"info",message:"操作已取消"})}))},handleRouter(e){this.$router.push(e)}}};const S=(0,s.Z)(U,[["render",k],["__scopeId","data-v-404c6e77"]]);var H=S;const Z=e=>((0,l.dD)("data-v-9237273c"),e=e(),(0,l.Cn)(),e),R={class:"login-container"},D={class:"text item"},T=Z((()=>(0,l._)("h2",null,"用户登录",-1)));function N(e,t,a,o,n,r){const u=(0,l.up)("el-input"),s=(0,l.up)("el-button"),i=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",R,[(0,l.Wm)(i,{class:"box-card"},{default:(0,l.w5)((()=>[(0,l._)("div",D,[T,(0,l.Wm)(u,{modelValue:o.usernameinput,"onUpdate:modelValue":t[0]||(t[0]=e=>o.usernameinput=e),placeholder:"用户名",class:"usernameinput"},null,8,["modelValue"]),(0,l.Wm)(u,{modelValue:o.passwordinput,"onUpdate:modelValue":t[1]||(t[1]=e=>o.passwordinput=e),class:"passwordinput",type:"password",placeholder:"密码","show-password":""},null,8,["modelValue"]),(0,l.Wm)(s,{type:"primary",round:"",class:"loginbutton",onClick:r.userlogin},{default:(0,l.w5)((()=>[(0,l.Uk)("登录")])),_:1},8,["onClick"])])])),_:1})])}var I={setup(){const e=(0,z.iH)(""),t=(0,z.iH)("");return{usernameinput:t,passwordinput:e}},methods:{async userlogin(){try{const e=this.usernameinput,t=this.passwordinput;if(0===e.length||0===t.length)return void V.z8.error("用户名和密码不能为空！");const a=await F.Z.post("/userlogin",{username:e,password:t});if(a){const e=a.data.status,t=a.data.msg;if(500===e)V.z8.error("登录失败！"+t);else if(200===e){const e=a.data.token;localStorage.setItem("token",e),V.z8.success("登录成功！"),this.$router.push("/")}else V.z8.error("登录失败！请稍后再试")}else V.z8.error("登录失败！服务器无响应")}catch(e){V.z8.error("登录失败！请稍后再试")}}}};const O=(0,s.Z)(I,[["render",N],["__scopeId","data-v-9237273c"]]);var j=O;const B=e=>((0,l.dD)("data-v-6bbd99c4"),e=e(),(0,l.Cn)(),e),q={class:"example-modal",style:{position:"relative",overflow:"hidden"}},P={key:0,id:"chat-container"},$=B((()=>(0,l._)("div",{id:"chat-messages"},null,-1))),L={id:"user-input",style:{display:"flex","justify-content":"space-between","align-items":"center",position:"fixed",bottom:"0",width:"100%",padding:"10px","box-sizing":"border-box"}};function M(e,t,a,o,n,r){const u=(0,l.up)("mdui-top-app-bar"),s=(0,l.up)("mdui-text-field"),i=(0,l.up)("mdui-button");return(0,l.wg)(),(0,l.iD)("div",q,[(0,l.Wm)(u),"chatwindow"===n.page?((0,l.wg)(),(0,l.iD)("div",P,[$,(0,l._)("div",L,[(0,l.Wm)(s,{clearable:"",type:"text",id:"message-input",autosize:"","min-rows":"1","max-rows":"4",style:{"flex-grow":"1","margin-right":"10px"},label:"输入消息："}),(0,l.Wm)(i,{onClick:r.sendMessage},{default:(0,l.w5)((()=>[(0,l.Uk)("发送")])),_:1},8,["onClick"])])])):(0,l.kq)("",!0)])}var E={data(){return{isLogin:!0,page:"chatwindow"}},methods:{sendMessage(){}}};const K=(0,s.Z)(E,[["render",M],["__scopeId","data-v-6bbd99c4"]]);var A=K;const J={class:"app-container"},G={class:"login-container"},Q={class:"text item"},X={key:0},Y={key:1},ee={key:2},te=["src"],ae={class:"bottom"};function oe(e,t,a,o,n,r){const u=(0,l.up)("Header"),s=(0,l.up)("CircleCheckFilled"),i=(0,l.up)("el-icon"),c=(0,l.up)("el-button"),d=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",J,[(0,l.Wm)(u),(0,l._)("div",G,[(0,l.Wm)(d,{class:"box-card"},{default:(0,l.w5)((()=>[(0,l._)("div",Q,[o.scanSuccessNotified?!o.loginSuccessNotified||o.scanSuccessNotified?((0,l.wg)(),(0,l.iD)("h2",Y,"请在手机上确认登录")):o.loginSuccessNotified?((0,l.wg)(),(0,l.iD)("h2",ee,"微信登录成功")):(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("h2",X,"请扫描二维码登录微信")),o.scanSuccessNotified?((0,l.wg)(),(0,l.j4)(i,{key:4,class:"image",style:{height:"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1})):((0,l.wg)(),(0,l.iD)("img",{key:3,src:o.qrcodeUrl,class:"image"},null,8,te)),(0,l._)("div",ae,[(0,l.Wm)(c,{type:"primary",round:"",class:"loginbutton",onClick:o.refresh},{default:(0,l.w5)((()=>[(0,l.Uk)("刷新二维码")])),_:1},8,["onClick"]),(0,l.Wm)(c,{type:"primary",round:"",class:"loginbutton",onClick:t[0]||(t[0]=e=>r.handleRouter("/"))},{default:(0,l.w5)((()=>[(0,l.Uk)("返回首页")])),_:1})])])])),_:1})])])}const le=(0,l._)("div",{class:"flex-grow"},null,-1),ne=(0,l._)("span",null,"首页",-1),re=(0,l._)("span",null,"登录微信",-1),ue=(0,l._)("span",null,"发送历史",-1),se=(0,l._)("span",null,"设置",-1),ie=(0,l._)("span",null,"退出登录",-1);function ce(e,t,a,o,n,r){const u=(0,l.up)("ChatLineRound"),s=(0,l.up)("HomeFilled"),i=(0,l.up)("el-icon"),c=(0,l.up)("el-menu-item"),d=(0,l.up)("CameraFilled"),m=(0,l.up)("Promotion"),p=(0,l.up)("Tools"),f=(0,l.up)("CircleCloseFilled"),w=(0,l.up)("el-sub-menu"),g=(0,l.up)("el-menu");return(0,l.wg)(),(0,l.j4)(g,{class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect,style:{"background-color":"skyblue"}},{default:(0,l.w5)((()=>[le,(0,l.Wm)(w,{index:"1"},{title:(0,l.w5)((()=>[(0,l.Wm)(u,{style:{width:"35px","margin-left":"8px"}})])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{index:"1",onClick:t[0]||(t[0]=e=>r.handleRouter("/"))},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1}),ne])),_:1}),(0,l.Wm)(c,{index:"2",onClick:t[1]||(t[1]=e=>r.handleRouter("/wxlogin"))},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1}),re])),_:1}),(0,l.Wm)(c,{index:"3",onClick:t[2]||(t[2]=e=>r.handleRouter("/history"))},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1}),ue])),_:1}),(0,l.Wm)(c,{index:"4",onClick:t[3]||(t[3]=e=>r.handleRouter("/config"))},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p)])),_:1}),se])),_:1}),(0,l.Wm)(c,{index:"5",onClick:r.logout},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f)])),_:1}),ie])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onSelect"])}var de={methods:{handleRouter(e){this.$router.push(e)},logout(){C.T.confirm("是否退出登录？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{window.localStorage.removeItem("token"),V.z8.success("退出登录成功！"),this.$router.push("/login")})).catch((()=>{(0,V.z8)({type:"info",message:"操作已取消"})}))}}};const me=(0,s.Z)(de,[["render",ce]]);var pe=me,fe={setup(){const e=(0,z.iH)(""),t=(0,z.iH)(!1),a=(0,z.iH)(!1);(0,l.bv)((async()=>{C.T.confirm("若已有微信登录，继续获取二维码会使当前登录微信下线，是否继续？","警告",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(o).catch((()=>{(0,V.z8)({type:"info",message:"操作已取消"})}))}));const o=async()=>{try{r();const t=await F.Z.get("/getqrcode");e.value=t.data.qrcode}catch(t){V.z8.error("获取二维码失败！")}r(),setInterval((()=>{r()}),500)},n=async()=>{try{const e=await F.Z.get("/stop"),t=e.data.Status;200===t?(window.location.reload(),V.z8.success("刷新成功！")):V.z8.error("刷新二维码失败！")}catch(e){V.z8.error("刷新二维码失败！"+e.message)}},r=async()=>{try{const e=await F.Z.get("/getstatus"),o=e.data.status;if(3===o)return void(t.value||(V.z8.success("扫描成功，请在手机上确认登录"),t.value=!0));if(200===o)return void(a.value||(V.z8.success("微信登录成功！"),a.value=!0))}catch(e){return}};return{qrcodeUrl:e,scanSuccessNotified:t,loginSuccessNotified:a,refresh:n}},methods:{handleRouter(e){this.$router.push(e)}},components:{Header:pe}};const we=(0,s.Z)(fe,[["render",oe],["__scopeId","data-v-bd5e2e00"]]);var ge=we;const he={class:"app-container"};function ve(e,t,a,o,n,r){const u=(0,l.up)("Header"),s=(0,l.up)("apiConfig"),i=(0,l.up)("el-tab-pane"),c=(0,l.up)("wxConfig"),d=(0,l.up)("accountConfig"),m=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.iD)("div",he,[(0,l.Wm)(u),(0,l.Wm)(m,{modelValue:o.activeName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeName=e),type:"card",style:{"margin-top":"15px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"API接口设置",name:"first"},{default:(0,l.w5)((()=>[(0,l.Wm)(s)])),_:1}),(0,l.Wm)(i,{label:"WechatBot设置",name:"second"},{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1}),(0,l.Wm)(i,{label:"账号设置",name:"third"},{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1})])),_:1},8,["modelValue"])])}const ye={class:"centered-card"},We={class:"text item"};function _e(e,t,a,o,n,r){const u=(0,l.up)("el-input"),s=(0,l.up)("el-form-item"),i=(0,l.up)("el-switch"),c=(0,l.up)("el-button"),d=(0,l.up)("el-form"),m=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",ye,[(0,l.Wm)(m,{class:"box-card"},{default:(0,l.w5)((()=>[(0,l._)("div",We,[(0,l.Wm)(d,{"label-position":"top",model:e.apiForm,size:o.formSize,"label-width":"auto","status-icon":""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"自动回复前缀"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.wxForm.prefix,"onUpdate:modelValue":t[0]||(t[0]=e=>o.wxForm.prefix=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"自动回复后缀(\\n换行)"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.wxForm.suffix,"onUpdate:modelValue":t[1]||(t[1]=e=>o.wxForm.suffix=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"群聊关键字回复(用英文逗号分隔)"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.wxForm.keyWords,"onUpdate:modelValue":t[2]||(t[2]=e=>o.wxForm.keyWords=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"私聊黑名单(用英文逗号分隔)"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.wxForm.blackName,"onUpdate:modelValue":t[3]||(t[3]=e=>o.wxForm.blackName=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"群聊白名单(用英文逗号分隔,不填会在所有群聊回复)"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.wxForm.whiteRoom,"onUpdate:modelValue":t[4]||(t[4]=e=>o.wxForm.whiteRoom=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"是否开启私聊自动回复"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:o.wxForm.autoReplySingle,"onUpdate:modelValue":t[5]||(t[5]=e=>o.wxForm.autoReplySingle=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"是否在被@时回复"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:o.wxForm.atReply,"onUpdate:modelValue":t[6]||(t[6]=e=>o.wxForm.atReply=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"primary",onClick:o.savewx},{default:(0,l.w5)((()=>[(0,l.Uk)(" 保存 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","size"])])])),_:1})])}var be={setup(){const e=(0,z.iH)("default"),t=(0,z.iH)("first"),a=(0,z.iH)({autoReplySingle:"",prefix:"",suffix:"",atReply:"",keyWords:"",whiteRoom:"",blackName:""}),o=async()=>{try{const e={...a.value};for(const a in e)"boolean"===typeof e[a]&&(e[a]=e[a].toString());const t=await F.Z.post("/wxconfig",e),o=t.data.status,l=t.data.msg;200===o?V.z8.success(l):V.z8.error("修改失败！"+l)}catch(e){V.z8.error("修改失败！",e.message)}};return(0,l.bv)((async()=>{try{const e=await F.Z.post("/getwxconfig"),t=e.data.msg;t.forEach((e=>{"true"===e.value||"false"===e.value?a.value[e.config]=JSON.parse(e.value):a.value[e.config]=e.value}))}catch(e){V.z8.error("查询失败！",e.message)}})),{formSize:e,wxForm:a,activeName:t,savewx:o}}};const xe=(0,s.Z)(be,[["render",_e],["__scopeId","data-v-2ee4613f"]]);var ke=xe;const ze={class:"centered-card"},Ve={class:"text item"};function Ce(e,t,a,o,n,r){const u=(0,l.up)("el-input"),s=(0,l.up)("el-form-item"),i=(0,l.up)("el-button"),c=(0,l.up)("el-form"),d=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",ze,[(0,l.Wm)(d,{class:"box-card"},{default:(0,l.w5)((()=>[(0,l._)("div",Ve,[(0,l.Wm)(c,{"label-position":"top",model:o.apiForm,size:o.formSize,"label-width":"auto","status-icon":""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"API接口地址"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.apiForm.apiUrl,"onUpdate:modelValue":t[0]||(t[0]=e=>o.apiForm.apiUrl=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"apiKey"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.apiForm.apiKey,"onUpdate:modelValue":t[1]||(t[1]=e=>o.apiForm.apiKey=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"app_code(为一些中转平台设置)"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.apiForm.app_code,"onUpdate:modelValue":t[2]||(t[2]=e=>o.apiForm.app_code=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"模型名称"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.apiForm.model,"onUpdate:modelValue":t[3]||(t[3]=e=>o.apiForm.model=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{type:"primary",onClick:o.saveapi},{default:(0,l.w5)((()=>[(0,l.Uk)(" 保存 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","size"])])])),_:1})])}var Fe={setup(){const e=(0,z.iH)("default"),t=(0,z.iH)("first"),a=(0,z.iH)({apiUrl:"",apiKey:"",app_code:"",model:""}),o=async()=>{try{const e=await F.Z.post("/apiconfig",a.value),t=e.data.status,o=e.data.msg;200===t?V.z8.success(o):V.z8.error("修改失败！"+o)}catch(e){V.z8.error("修改失败！",e.message)}};return(0,l.bv)((async()=>{try{const e=await F.Z.post("/getapiconfig"),t=e.data.msg;t.forEach((e=>{a.value[e.config]=e.value}))}catch(e){V.z8.error("查询失败！",e.message)}})),{formSize:e,apiForm:a,activeName:t,saveapi:o}}};const Ue=(0,s.Z)(Fe,[["render",Ce],["__scopeId","data-v-1936ed58"]]);var Se=Ue;const He={class:"centered-card"},Ze={class:"text item"};function Re(e,t,a,o,n,r){const u=(0,l.up)("el-input"),s=(0,l.up)("el-form-item"),i=(0,l.up)("el-button"),c=(0,l.up)("el-form"),d=(0,l.up)("el-card");return(0,l.wg)(),(0,l.iD)("div",He,[(0,l.Wm)(d,{class:"box-card"},{default:(0,l.w5)((()=>[(0,l._)("div",Ze,[(0,l.Wm)(c,{"label-position":"top",model:o.userForm,size:o.formSize,"label-width":"auto","status-icon":""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{label:"更改用户名"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:o.userForm.newusername,"onUpdate:modelValue":t[0]||(t[0]=e=>o.userForm.newusername=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"旧密码"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"password",modelValue:o.userForm.oldpassword,"onUpdate:modelValue":t[1]||(t[1]=e=>o.userForm.oldpassword=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"新密码"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"password",modelValue:o.userForm.newpassword1,"onUpdate:modelValue":t[2]||(t[2]=e=>o.userForm.newpassword1=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{label:"再次输入新密码"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"password",modelValue:o.userForm.newpassword2,"onUpdate:modelValue":t[3]||(t[3]=e=>o.userForm.newpassword2=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{type:"primary",onClick:o.saveuser},{default:(0,l.w5)((()=>[(0,l.Uk)(" 保存 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","size"])])])),_:1})])}var De={setup(){const e=(0,z.iH)("default"),t=(0,z.iH)("first"),a=(0,z.iH)({newusername:"",oldpassword:"",newpassword1:"",newpassword2:"",newpassword:""}),o=async()=>{if(a.value.newpassword1===a.value.newpassword2){a.value.newpassword=a.value.newpassword1;try{const e=await F.Z.post("/changeaccount",a.value),t=e.data.status,o=e.data.msg;200===t?V.z8.success(o):V.z8.error("修改失败！"+o)}catch(e){V.z8.error("修改失败！",e.message)}}else V.z8.error("两次输入的密码不匹配！")};return(0,l.bv)((async()=>{try{const e=await F.Z.post("/getusername");a.value.newusername=e.data.msg}catch(e){V.z8.error("查询失败！",e.message)}})),{formSize:e,userForm:a,activeName:t,saveuser:o}}};const Te=(0,s.Z)(De,[["render",Re],["__scopeId","data-v-1da6d1cd"]]);var Ne=Te,Ie={setup(){const e=(0,z.iH)("first");return{activeName:e}},components:{Header:pe,wxConfig:ke,apiConfig:Se,accountConfig:Ne}};const Oe=(0,s.Z)(Ie,[["render",ve]]);var je=Oe;function Be(e,t,a,o,n,r){const u=(0,l.up)("Header"),s=(0,l.up)("el-button"),i=(0,l.up)("el-table-column"),c=(0,l.up)("el-table");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(u),(0,l.Wm)(s,{type:"primary",onClick:o.open},{default:(0,l.w5)((()=>[(0,l.Uk)("清空数据")])),_:1},8,["onClick"]),(0,l.Wm)(c,{data:o.tableData,style:{width:"100%"},"table-layout":"auto",stripe:"",border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{prop:"time",label:"时间"}),(0,l.Wm)(i,{prop:"type",label:"类型"}),(0,l.Wm)(i,{prop:"roomname",label:"群聊名称"}),(0,l.Wm)(i,{prop:"name",label:"发送人"}),(0,l.Wm)(i,{prop:"recmsg",label:"收到消息"}),(0,l.Wm)(i,{prop:"senmsg",label:"发送消息"})])),_:1},8,["data"])])}var qe={components:{Header:pe},setup(){const e=(0,z.iH)([]),t=()=>{C.T.confirm("此操作会清除所有记录，是否继续？","警告",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(a).catch((()=>{(0,V.z8)({type:"info",message:"操作已取消"})}))},a=async()=>{try{const e=await F.Z.post("/clearmessage"),t=e.data.status,a=e.data.msg;200===t?(V.z8.success(a),window.location.reload()):V.z8.error("清除失败！"+a)}catch(e){V.z8.error("清除失败！",e.message)}};return(0,l.bv)((async()=>{try{const t=await F.Z.post("/messagehistory");e.value=t.data.msg}catch(t){V.z8.error("获取数据失败！")}})),{tableData:e,clear:a,open:t}}};const Pe=(0,s.Z)(qe,[["render",Be]]);var $e=Pe;const Le=(0,d.p7)({history:(0,d.r5)(),routes:[{path:"/",component:H,name:"Home"},{path:"/login",component:j,name:"Login"},{path:"/aichat",component:A,name:"Chat"},{path:"/wxlogin",component:ge,name:"Wxlogin"},{path:"/config",component:je,name:"Config"},{path:"/history",component:$e,name:"History"}]});Le.beforeEach(((e,t,a)=>{if("/login"===e.path)return a();const o=window.localStorage.getItem("token");if(!o)return a("/login");a()}));var Me=Le,Ee=a(3812),Ke=(a(4415),a(2748));const Ae=(0,o.ri)(c);F.Z.interceptors.request.use((e=>(e.headers.Authorization=window.localStorage.getItem("token"),e)));for(const[Je,Ge]of Object.entries(Ke))Ae.component(Je,Ge);Ae.use(Me).use(Ee.Z).mount("#app")}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],l=e[c][1],n=e[c][2];for(var u=!0,s=0;s<o.length;s++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[s])}))?o.splice(s--,1):(u=!1,n<r&&(r=n));if(u){e.splice(c--,1);var i=l();void 0!==i&&(t=i)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,r=o[0],u=o[1],s=o[2],i=0;if(r.some((function(t){return 0!==e[t]}))){for(l in u)a.o(u,l)&&(a.m[l]=u[l]);if(s)var c=s(a)}for(t&&t(o);i<r.length;i++)n=r[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},o=self["webpackChunkwebbot"]=self["webpackChunkwebbot"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(5318)}));o=a.O(o)})();
//# sourceMappingURL=app.7e5e693b.js.map